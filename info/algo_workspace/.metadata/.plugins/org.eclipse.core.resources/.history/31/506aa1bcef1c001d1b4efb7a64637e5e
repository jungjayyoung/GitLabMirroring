package boj;

import java.io.*;
import java.util.*;


public class p17822 {
	static int n, m, t;
	static Deque<Integer>[] round;

	public static void main(String[] args) throws IOException{
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st;
		
		st = new StringTokenizer(br.readLine()," ");
		
		n = Integer.parseInt(st.nextToken());
		m = Integer.parseInt(st.nextToken());
		t = Integer.parseInt(st.nextToken());
		
		round = new Deque[n];
		
		
		for(int i = 0; i < n; i++) {
		
			st = new StringTokenizer(br.readLine()," ");
			for(int j = 0; j < m; j++) {
				round[i].add(Integer.parseInt(st.nextToken()));
			}
			
		}
		
		// 원판 t만큼 돌리기
		
		for(int i = 0; i < t; i++) {
			int x, d, k;
			st = new StringTokenizer(br.readLine()," ");
			x = Integer.parseInt(st.nextToken());
			d = Integer.parseInt(st.nextToken());
			k = Integer.parseInt(st.nextToken());
			
			for(int r_num = 0; r_num < n; r_num++) {
				
				if((r_num + 1) % x == 0) {
					
					// 시계 방향
					if(d == 0) {
						
						// k 번 회전
						for(int j = 0; j < k; j++) {
							int tmp = round[r_num].pollFirst();
							round[r_num].add(tmp);
							
						}
						
					// 반시계 방향
					}else if(d == 1) {
						
						// k 번 회전
						for(int j = 0; j <k; j++) {
							int tmp = round[r_num].pollLast();
							round[r_num].addFirst(tmp);
						}
						
					}
					
					
				}
				
			}
			
		}
		
		
		
		
		
		
		
	}

}
