package boj;

import java.io.*;
import java.util.*;



public class p15685 {

	static int n;
	static int board[][] = new int[101][101];
	static List<Integer> dir_list;
	static int dx[] = {-1,0,1,0};
	static int dy[] = {0,1,0,-1};
	
	
	public static void main(String[] args) throws IOException{
		
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st;
		
		
		n = Integer.parseInt(br.readLine());
		
		
		for(int i = 0; i < n; i++) {
			
			st = new StringTokenizer(br.readLine()," ");
			int xx,yy,d,g;
			dir_list = new ArrayList<>();
			
			xx = Integer.parseInt(st.nextToken());
			yy = Integer.parseInt(st.nextToken());
			d = Integer.parseInt(st.nextToken());
			g = Integer.parseInt(st.nextToken());
			
			
			// gen: 여기에 현재 드래곤 커브의 좌표값들이 저장이 된다
			dir_list.add(d); //  방향을 집어넣는다.
			//세대 만큼 돌린다.
			
			int nextx = xx;
			int nexty = yy;
			int dir;
			board[yy][xx] = 1; 
			// 0 세대부터 시작
			// 스타트 위치는 갱신만 해주고 방향만 리스트에 집어넣는다.
			for(int j = 0; j<g + 1; j++) {
				
				int cur_dir_size = dir_list.size();
				
				for(int k = 0; k < cur_dir_size; k++) {
					
					dir = dir_list.get(k);
					
					if(dir == 0) { // 오른쪽
						nextx = nextx + 1;
					}else if(dir == 1) { // 위쪽
						nexty = nexty - 1;
					}else if(dir == 2) { // 왼쪽
						nextx = nextx - 1;
					}else if(dir == 3) { // 아래쪽
						nexty = nexty + 1;
					}
					board[nexty][nextx] = 1;
					// 방향은 시계방향을 회전한 값이 들어가야 한다.	
					int next_dir = dir + 1;
					if(dir + 1 > 3) next_dir = 0;
					dir_list.add(next_dir);
					
				}
				
				// 모든 gen에 대해서 정 반대 방향으로 바꾼뒤 시계방향으로 방향 바꾸기
				
				
				
				
				
				
				// 세대가 증가할 때 마다 방향이 바뀌면서
				
			}
			
			
		}

	}

}
